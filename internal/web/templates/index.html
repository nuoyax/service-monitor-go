<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <title>Golang 运维工具</title>
    <link
      href="https://cdn.bootcdn.net/ajax/libs/twitter-bootstrap/5.3.8/css/bootstrap.min.css"
      rel="stylesheet"
    />
    <script src="https://cdn.bootcdn.net/ajax/libs/axios/1.11.0/axios.min.js"></script>
  </head>
  <body class="p-4">
    <h1>Golang 运维工具 Web 管理界面</h1>
    <h3>系统信息</h3>
    <ul>
      <li>操作系统: {{ .SysInfo.OS }}</li>
      <li>CPU: {{ .SysInfo.CPU }} ({{ .SysInfo.CPU_Cores }} 核)</li>
      <li>
        内存总量: {{ .SysInfo.Memory }}，使用率: {{ .SysInfo.MemoryUsed }}
      </li>
      <li>磁盘总量: {{ .SysInfo.Disk }}，使用率: {{ .SysInfo.DiskUsed }}</li>
    </ul>

    <h3>执行命令</h3>
    <input type="text" id="cmd" class="form-control" placeholder="输入命令" />
    <button class="btn btn-primary mt-2" onclick="runCommand()">执行</button>

    <pre id="output" class="mt-3 p-3 border bg-light"></pre>

    <script>
      function runCommand() {
        const command = document.getElementById("cmd").value;
        axios
          .post("/exec", `command=${encodeURIComponent(command)}`)
          .then((res) => {
            document.getElementById("output").textContent = res.data.output;
          })
          .catch((err) => {
            document.getElementById("output").textContent = err;
          });
      }
    </script>
  </body>
</html>
